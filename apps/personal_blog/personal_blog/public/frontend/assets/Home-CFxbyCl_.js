import{P as V,_ as S}from"./PostCardSkeleton-D6FJ_uih.js";import{c as y,a as s,b as x,o as r,d as o,F as h,r as f,n as $,t as P,e as C,f as z,w as B,u as p,g as N,h as j}from"./index.js";const E={key:0,class:"flex items-center justify-center gap-2","aria-label":"分页导航"},F=["disabled"],L={class:"flex items-center gap-1"},R={key:1,class:"px-2 text-gray-400"},q=["onClick","aria-current"],D={key:2,class:"px-2 text-gray-400"},H=["disabled"],T={__name:"Pagination",props:{total:{type:Number,required:!0},page:{type:Number,default:1},pageSize:{type:Number,default:10},maxVisible:{type:Number,default:5}},emits:["change"],setup(M,{emit:g}){const i=M,u=g,l=y(()=>i.page),e=y(()=>Math.ceil(i.total/i.pageSize)),d=y(()=>{const t=[],a=Math.floor(i.maxVisible/2);let n=Math.max(2,l.value-a),_=Math.min(e.value-1,l.value+a);l.value<=a+1&&(_=Math.min(e.value-1,i.maxVisible)),l.value>=e.value-a&&(n=Math.max(2,e.value-i.maxVisible+1));for(let w=n;w<=_;w++)t.push(w);return t}),m=y(()=>e.value>1&&!d.value.includes(1)),c=y(()=>e.value>1&&!d.value.includes(e.value)),b=y(()=>d.value.length>0&&d.value[0]>2),k=y(()=>d.value.length>0&&d.value[d.value.length-1]<e.value-1),v=t=>{t>=1&&t<=e.value&&t!==l.value&&u("change",t)};return(t,a)=>e.value>1?(r(),s("nav",E,[o("button",{onClick:a[0]||(a[0]=n=>v(l.value-1)),disabled:l.value<=1,class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"上一页"},[...a[4]||(a[4]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,F),o("div",L,[m.value?(r(),s("button",{key:0,onClick:a[1]||(a[1]=n=>v(1)),class:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"}," 1 ")):x("",!0),b.value?(r(),s("span",R,"...")):x("",!0),(r(!0),s(h,null,f(d.value,n=>(r(),s("button",{key:n,onClick:_=>v(n),class:$(["px-4 py-2 rounded-lg transition-colors",n===l.value?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"]),"aria-current":n===l.value?"page":void 0},P(n),11,q))),128)),k.value?(r(),s("span",D,"...")):x("",!0),c.value?(r(),s("button",{key:3,onClick:a[2]||(a[2]=n=>v(e.value)),class:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},P(e.value),1)):x("",!0)]),o("button",{onClick:a[3]||(a[3]=n=>v(l.value+1)),disabled:l.value>=e.value,class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"下一页"},[...a[5]||(a[5]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,H)])):x("",!0)}},W={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8"},A={class:"flex flex-wrap gap-2"},G=["onClick"],I={key:0,class:"grid md:grid-cols-2 gap-8"},J={key:1,class:"grid md:grid-cols-2 gap-8"},K={key:2,class:"text-center py-16"},O={key:3,class:"mt-12"},X={__name:"Home",setup(M){const g=C(1),i=C(10),u=C(""),l=m=>{g.value=m},e=z({url:"personal_blog.api.post.get_posts",params:{page:g.value,page_size:i.value,category:u.value||void 0},auto:!0}),d=z({url:"personal_blog.api.category.get_categories",auto:!0});return B([g,u],()=>{e.update({params:{page:g.value,page_size:i.value,category:u.value||void 0}}),e.reload()}),B(u,()=>{g.value=1}),(m,c)=>{var b,k,v;return r(),s("div",null,[c[2]||(c[2]=o("section",{class:"text-center mb-16"},[o("h1",{class:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6"}," Welcome to My Blog "),o("p",{class:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto"}," 分享技术见解、开发经验和生活感悟 ")],-1)),o("div",W,[o("div",A,[o("button",{onClick:c[0]||(c[0]=t=>u.value=""),class:$(["px-4 py-2 rounded-full text-sm font-medium transition-colors",u.value?"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700":"bg-primary-600 text-white"])}," 全部 ",2),(r(!0),s(h,null,f(p(d).data||[],t=>(r(),s("button",{key:t.name,onClick:a=>u.value=t.name,class:$(["px-4 py-2 rounded-full text-sm font-medium transition-colors",u.value===t.name?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},P(t.category_name),11,G))),128))])]),p(e).loading?(r(),s("div",I,[(r(),s(h,null,f(4,t=>N(V,{key:t})),64))])):(k=(b=p(e).data)==null?void 0:b.posts)!=null&&k.length?(r(),s("div",J,[(r(!0),s(h,null,f(p(e).data.posts,t=>(r(),j(S,{key:t.name,post:t},null,8,["post"]))),128))])):(r(),s("div",K,[...c[1]||(c[1]=[o("p",{class:"text-gray-500 dark:text-gray-400"},"暂无文章",-1)])])),((v=p(e).data)==null?void 0:v.total)>i.value?(r(),s("div",O,[N(T,{total:p(e).data.total,page:g.value,"page-size":i.value,onChange:l},null,8,["total","page","page-size"])])):x("",!0)])}}};export{X as default};
